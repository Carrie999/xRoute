{"version":3,"sources":["webpack:///./src/lib/js/index.js?e42f","webpack:///./src/lib/js/controller.js?a91c","webpack:///./src/lib/js/model.js?74c2","webpack:///./~/.1.0.0@whatwg-fetch/fetch.js?2bf3","webpack:///./src/lib/js/eventEmitter.js?75b1","webpack:///./src/lib/js/xRoute.js?3a53"],"names":["Controller","totalModel","Route","name","containerName","model","containerBox","domMap","domMapCache","eventCache","viewInit","viewDestory","inited","document","querySelector","setDomMap","bindEvents","pageInit","obj","key","item","addEventListener","actionName","action","bind","fn","Model","Object","create","records","created","extend","extended","call","include","included","prototype","init","object","parent","instance","apply","arguments","post","url","Promise","resolve","reject","fetch","method","headers","body","JSON","stringify","then","data","json","get","getHash","window","location","hash","slice","newRecord","dup","destory","update","assign","save","find","console","log","setLocItem","value","itemValue","type","toString","undefined","localStorage","setItem","getLocItem","getItem","removeLocItem","removeItem","controllers","registerController","EventEmitter","cache","context","push","shift","fns","length","i","_fn","_f","splice","routes","useHash","pageCache","path","split","join","isFromHistory","curContext","oldPath","forEach","route","index","routeItem","history","pushState","routeClassHandle","classList","remove","add","handleRoute","e","state","href","target","dataset","oldHash","preventDefault","router","currHash","flag","lastArr"],"mappings":"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CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD,UAAS;AACT;AACA,UAAS;AACT,+EAA8E;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA,wCAAuC,0BAA0B;AACjE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,gCAA+B,0BAA0B,eAAe;AACxE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAA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","file":"js/register/lib.js","sourcesContent":["import {Controller} from 'jsLib/controller';\nimport {totalModel} from 'jsLib/model';\nimport Route from 'jsLib/xRoute';\n\n\nexport {\n    Controller,\n    totalModel,\n    Route\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/js/index.js\n **/","export class Controller {\n    constructor(name, containerName, model) {\n        this.name = name;\n        this.containerName = containerName || '';\n        this.containerBox = null;\n        this.domMap = {};\n        this.domMapCache = {};\n        this.eventCache = {};\n        this.model = model || {};\n        this.viewInit = null || function() {};\n        this.viewDestory = null || function() {};\n        \n        this.inited = false;\n    }\n    //init函数\n    init() {\n        //console.log(this);\n        this.containerBox = document.querySelector(this.containerName);\n        this.setDomMap();\n        this.bindEvents();\n        this.model.pageInit();\n        this.viewInit();\n\n        this.inited = true;\n        \n        return this;\n    }\n    setModelCache(obj = {}) {\n        this.model = obj;\n        return this;\n    }\n    getDomMap(obj = {}) {\n        this.domMapCache = obj;\n        return this;\n    }\n    //dom缓存\n    setDomMap() {\n        let obj = this.domMapCache;\n        for(let key in obj) {\n            this.domMap[key] = this.containerBox.querySelector(obj[key]);\n        }\n        return this;\n    }\n    getBindEvents(obj = {}) {\n        this.eventCache = obj;\n        return this;\n    }\n    //事件绑定\n    bindEvents() {\n        let obj = this.eventCache;\n        for(let key in obj) {\n            let item = obj[key];\n            this.domMap[key].addEventListener(item.actionName, item.action.bind(this.domMap[key]));\n        }\n        return this;\n    }\n    \n    unbindEvent() {\n        \n    }\n    \n    //钩子: 页面初始化(willAppear阶段)\n    getViewInit(fn) {\n        this.viewInit = fn.bind(this) || function() {};\n        return this;\n    }\n\n    //钩子: 页面销毁阶段(willDisappear阶段)\n    getViewDestory(fn) {\n        this.viewDestory = fn.bind(this) || function() {};\n        return this;\n    }\n\n    //获取controller的初始化状态\n    get getInitedStatus() {\n        return this.inited;\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/js/controller.js\n **/","import 'whatwg-fetch';\nimport {Controller} from './controller';\nimport EventEmitter from './eventEmitter';\n\nlet Model = Object.create(EventEmitter);\n\n//Model用以创建新模型,新模型用以创建实例\nModel = {\n    records: {},\n    //model创建后的回调\n    created() {\n        this.records = {};  //创建新的model后,清空records,避免records被其他的model共享而发生副作用\n    },\n    extend(obj = {}) {\n        let extended = obj.extended;\n        for (let key in obj) {\n            this[key] = obj[key];\n        }\n        if (extended) extended.call(this);\n    },\n    include(obj = {}) {\n        let included = obj.included;\n        for (let key in obj) {\n            this.prototype[key] = obj[key];\n        }\n        if (included) included.call(this);\n    },\n    prototype: {\n        init() {\n\n        }\n    },\n    create() {\n        let object = Object.create(this);   //新模型继承至Model,调用init方法产生新实例\n        object.parent = this;               //新模型.parent = Model\n\n        object.prototype = object.fn = Object.create(this.prototype);\n\n        object.created();\n\n        return object;\n    },\n    init() {\n        let instance = Object.create(this.prototype);\n        instance.parent = this;             //实例.parent = 新模型\n        instance.init.apply(instance, arguments);   //Model.prototype.init();\n        return instance;\n    }\n}\n\n\n//ajax  实例继承\nModel.include({\n    post(url = '', obj = {}) {\n        return new Promise((resolve, reject) => {\n            fetch(url, {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(obj)\n            }).then(data => resolve(data.json()));\n            /*.then((data) => {\n                //添加正确处理和错误处理的函数 reject\n                resolve(data.json());\n            })*/\n        })\n    },\n    get(url = '') {\n        return new Promise((resolve, reject) => {\n            fetch(url)\n                .then(data => resolve(data.json()));\n            /*fetch(url)\n                .then((data) => {\n                    //正确处理的方式\n                    resolve(data.json());\n                })*/\n        })\n    }\n});\n\n//hash值\nModel.include({\n    getHash() {\n        return window.location.hash.slice(2);\n    }\n});\n\n//页面初始化model数据\nModel.include({\n    pageInit() {\n\n    }\n});\n\n//Model对象记录\nModel.include({\n    newRecord: true,\n    create() {\n        this.newRecord = false;\n        //新模型.records[this.name] = this;\n        this.parent.records[this.name] = this.dup();\n    },\n    destory() {\n        delete this.parent.records[this.name];\n    },\n    update() {\n        this.parent.records[this.name] = this.dup();\n    },\n    dup() {\n        return Object.assign({}, this);\n    },\n    save() {\n        this.newRecord ? this.create() : this.update();\n    }\n});\n\nModel.extend({\n    find(name = '') {\n        return this.records[name] || console.log('Unkonwn record');\n    }\n});\n\n\n//localstorage操作\nModel.include({\n    setLocItem(key = '', value) {\n        let itemValue,\n            type = typeof value;\n        if (type === 'string' || type === 'number') {\n            itemValue = value;\n        } else if (Object.prototype.toString.call(value) === '[object Object]') {\n            itemValue = JSON.stringify(value);\n        } else {\n            itemValue = undefined;\n        }\n        localStorage.setItem(key, itemValue);\n    },\n    getLocItem(key = '') {\n        return localStorage.getItem(key);\n    },\n    removeLocItem(key = '') {\n        return localStorage.removeItem(key);\n    }\n});\n\n\n\n\n//controller在Model上进行注册\nModel.include({\n    controllers: {},\n    //这里的controller不能使用容器的选择器确定\n    registerController(name, containerName) {\n        return this.controllers[name] || (this.controllers[name] = new Controller(name, containerName,this));\n    }\n})\n\n\nlet totalModel = Model.create();\n\n\nexport {totalModel}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/js/model.js\n **/","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = (xhr.getAllResponseHeaders() || '').trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/.1.0.0@whatwg-fetch/fetch.js\n ** module id = 12\n ** module chunks = 1 5\n **/","export default class EventEmitter {\n    constructor() {\n        this.cache = [];\n    }\n\n    listen(type, fn, context = this) {\n        !this.cache[type] && (this.cache[type] = []);\n        this.cache[type].push(fn);\n    }\n\n    trigger() {\n        let type = [].shift.call(arguments),\n            fns = this.cache[type];\n\n        if(!fns || fns.length === 0) return false;\n\n        for(let i = 0, fn; fn = fns[i++];) {\n            fn[i].apply(this, [].slice.call(arguments, 1));\n        }    \n        \n    }\n\n    //fn参数不传时,默认清除所有绑定事件\n    remove(type, fn) {\n        let fns = this.cache[type];\n\n        if(!fns) return false;\n\n        if(!fn) {\n            fns && (fns.length = 0);\n        } else {\n            for(let i = 0, _fn; _f = fns[i++];) {\n                if(_fn === fn) {\n                    fns.splice(i, 1);\n                }\n            }\n        }\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/js/eventEmitter.js\n **/","import {dd} from 'jsLib/util';\n\nexport default class Route {\n    constructor() {\n        this.routes = [];\n        this.useHash = false;\n        this.pageCache = {};    //在内存中进行缓存\n    }\n\n    addRoute({path, viewInit, viewDestory, context}) {\n        path = path.split('.').join('/');\n\n        this.routes.push({\n            path,\n            viewInit,\n            viewDestory,\n            context\n        });\n    }\n    handleRoute(path = '', isFromHistory) {\n        let curContext,                     //上下文\n            oldPath = location.hash.slice(2);\n\n        //页面销毁\n        this.routes.forEach((route, index) => {\n            if (route.path === oldPath) {\n                route.viewDestory && route.viewDestory();\n            }\n        });\n\n        for (let i = 0, routeItem; routeItem = this.routes[i++];) {\n            if (routeItem.path === path) {\n                //如果是嵌套内的路由被匹配,那么还应该还调用外层的路由回调\n                curContext = routeItem.context ? routeItem.context : window;\n\n                routeItem.viewInit.apply(curContext, [path]);\n\n                if (!this.useHash) {\n                    //如果是从popstate中获取的状态,那么不应该将其加入历史状态栈中\n                    if (!isFromHistory) {\n                        history.pushState({ path: path }, null, '#/' + path);\n                    }\n                } else {\n                    location.hash = '/' + path;\n                }\n\n                //激活状路由样式处理\n                this.routeClassHandle(path);\n\n                return true;\n            }\n        }\n        return false;\n    }\n\n    routeClassHandle(hash) {\n        hash = hash.split('/').join('-');\n        if (hash) {\n            document.querySelector('.route-active') && document.querySelector('.route-active').classList.remove('route-active');\n            document.querySelector(`[data-href=${hash}]`) && document.querySelector(`[data-href=${hash}]`).classList.add('route-active');\n        }\n    }\n\n    go(path) {\n        path = path.split('.').join('/');\n        this.handleRoute(path);\n    }\n\n    back() {\n\n    }\n\n    bootstrap() {\n\n        if (!history.pushState) this.useHash = true;\n\n        if (!this.useHash) {\n            window.addEventListener('popstate', (e) => {\n                let state = e.state;\n\n                if (state && state.path) this.handleRoute(state.path, true);\n\n                //TODO 添加对于state为空的情况的处理\n            })\n        } else {\n            window.addEventListener('hashchange', (e) => {\n                this.handleRoute(location.hash.slice(2));\n            });\n        }\n\n\n        document.addEventListener('click', (e) => {\n            let href = e.target.dataset.href || '',\n                oldHash = location.hash.slice(2);\n\n            //将data-href数据形式转化为路由形式\n            href = href.split('-').join('/');       //将data-href='ccc-aaa' --->>> 转化为 ccc/aaa  外部写法可能存在出入,但是在内部统一转化为a/b/c/d的形式\n\n            if (href) {\n                //添加钩子 路由进行跳转时模型model上数据的处理\n                if (href === oldHash) return;\n\n                if (this.handleRoute(href)) {\n                    //阻止默认事件\n                    e.preventDefault();\n\n                }\n            }\n        })\n\n        document.addEventListener('DOMContentLoaded', (e) => {\n            let router = this.routes[0],\n                currHash = location.hash.slice(2),\n                flag = false;\n\n            let lastArr = currHash.split('/')[0];\n\n\n            //TODO 代码比较龊,可以优化的地方还很多\n            this.routes.forEach((item, index) => {\n                if (item.path === lastArr) {\n                    flag = true;\n                    return item.viewInit.call(item.context || window);\n                }\n            });\n\n            if (lastArr !== currHash) {\n                this.routes.forEach((item, index) => {\n                    if (item.path === currHash) {\n                        return item.viewInit.call(item.context || window);\n                    }\n                })\n            }\n\n            //初始化active.route样式处理\n            this.routeClassHandle(currHash);\n\n            if (!flag) {\n                router.viewInit.call(router.context || window);\n\n                if (!this.useHash) {\n                    history.pushState({ path: router.path }, null, '#/' + router.path);\n                } else {\n                    location.hash = '/' + router.path;\n                }\n            }\n\n            //!flag ? router.viewInit.call(router.context || window) : '';\n        })\n    }\n}\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/js/xRoute.js\n **/"],"sourceRoot":""}